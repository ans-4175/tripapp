function toObject(e){var t={};for(var n=0;n<e.length;++n)t[n]=e[n];return t}function twoDigits(e){if(0<=e&&e<10)return"0"+e.toString();if(-10<e&&e<0)return"-0"+(-1*e).toString();return e.toString()}function getCurTime(){var e=new Date;e=twoDigits(e.getHours())+":"+twoDigits(e.getMinutes())+":"+twoDigits(e.getSeconds());console.log(e);return e}function getValue(e){var t=window.location.href;var n="";var r=t.indexOf("?")>=0?true:false;if(!r)return"";n=t.split("?");if(n.length==0){return""}var s=n[1];var o=s.split("&");var u="";for(i=0;i<o.length;i++){var a=o[i].split("=");if(a[0]==e){u=a[1];break}}u=unescape(u);u=u.replace(/\+/g," ");return u}function removeHtmlStorage(e){localStorage.removeItem(e);localStorage.removeItem(e+"_time")}function setHtmlStorage(e,t,n){if(n==undefined||n=="null"){var n=36e4}var r=new Date;var i=Math.round(r.setSeconds(r.getSeconds()+n)/1e3);localStorage.setItem(e,t);localStorage.setItem(e+"_time",i)}function statusHtmlStorage(e){var t=new Date;var n=Math.round(+t/1e3);var r=localStorage.getItem(e+"_time");if(r==undefined||r=="null"){var r=0}if(r<n){removeHtmlStorage(e);return 0}else{return 1}}function setSignUp(e,t,n,r){$("#"+r).slideToggle();$.post("http://labtekindie.net/trippp/user/signup",{username:e,password:t,email:n},function(e){var t=JSON.parse(e);$("#"+r).slideToggle();if(t.response){var n={id:t.id};console.log(n);localStorage.setItem("logged",JSON.stringify(n));window.location="demo.html"}else{alert("Failed to signup")}},"json")}function setLogin(e,t,n){$("#"+n).slideToggle();$.post("http://labtekindie.net/trippp/user/login",{username:e,password:t},function(e){var t=JSON.parse(e);$("#"+n).slideToggle();if(t.response){var r={id:t.id};console.log(r);localStorage.setItem("logged",JSON.stringify(r));window.location="browse.html"}else{alert("Failed to login")}},"json")}function logOut(){localStorage.removeItem("logged");window.location="login.html"}function getPin(e,t){var n=new google.maps.MarkerImage("http://www.googlemapsmarkers.com/v1/"+t+"/"+e+"/",new google.maps.Size(21,34),new google.maps.Point(0,0),new google.maps.Point(10,34));return n}function initMap(e,t,n,r){var i=document.getElementById(t);var s=new google.maps.LatLng(n,r);var o={center:s,zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};e.map=new google.maps.Map(i,o);e.marker=new google.maps.Marker({position:s,title:"This is you",icon:"img/marker.png"});e.marker.setMap(e.map);$.get("http://labtekindie.net/trippp/trip/list/"+n+"/"+r,function(t){var n=JSON.parse(t);if(n.response){for(key in n.data){var r=getPin("FFD42A","T");var i=new google.maps.Marker({position:new google.maps.LatLng(n.data[key].lat,n.data[key].lon),title:n.data[key].judul,icon:r,map:e.map});e.listmarkers.push(i)}}else{alert("Nothing trips list in map right now")}},"json")}function initRoute(e,t,n,r,i){var s=document.getElementById(t);$.get("http://labtekindie.net/trippp/trip/view/"+i,function(t){var n=JSON.parse(t);if(n.response){var r=new google.maps.LatLng(n.data.lat,n.data.lon);var i={center:r,zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};e.map=new google.maps.Map(s,i);e.marker=new google.maps.Marker({position:r,title:"This is starting route",icon:"img/marker.png"});e.marker.setMap(e.map);var o=new google.maps.InfoWindow;var u=new google.maps.LatLngBounds;var a=new Array;for(d=0;d<n.data.places.length;d++){var t=n.data.places[d];var f=new google.maps.LatLng(t.lat,t.lon);a.push(f);var l=new google.maps.Marker({position:f,map:e.map,title:t.nama});u.extend(l.position);(function(t,n){google.maps.event.addListener(t,"click",function(r){o.setContent(n.keterangan);o.open(e.map,t)})})(l,t)}e.map.setCenter(u.getCenter());e.map.fitBounds(u);var c=new google.maps.MVCArray;var h=new google.maps.DirectionsService;var p=new google.maps.Polyline({map:e.map,strokeColor:"#ffd42a"});for(var d=0;d<a.length;d++){var v=a[d];var m=a[d+1];c.push(v);p.setPath(c);h.route({origin:v,destination:m,travelMode:google.maps.DirectionsTravelMode.DRIVING},function(e,t){if(t==google.maps.DirectionsStatus.OK){for(var n=0,r=e.routes[0].overview_path.length;n<r;n++){c.push(e.routes[0].overview_path[n])}}})}}else{alert("Nothing trips right now")}},"json")}function setMarkerPosition(e,t,n){e.marker.setPosition(new google.maps.LatLng(t,n));e.map.setCenter(e.marker.getPosition())}function getCheckMulti(e){var t=[];$("#"+e+" input:checked").each(function(){t.push(this.name)});return t}function pindahView(e){window.location="view.html?id="+e}function pindahAddplace(){var e=JSON.parse(localStorage.getItem("logged"));var t=e.id;window.location="savedplaces.html?uid="+t}function pindahHal(e){window.location=e+".html"}function getListTrip(e,t,n,r){$.get("http://labtekindie.net/trippp/trip/list/"+e+"/"+t,{filter:n,qword:r},function(e){var t=JSON.parse(e);if(t.response){localStorage.setItem("browselist",JSON.stringify(t.data));var n="";for(key in t.data){var n="";n+="<li><a onclick='pindahView("+t.data[key].idTrip+")' href='#'><div class='browse1' id=\"viewlist-"+t.data[key].idTrip+'"><p>'+t.data[key].judul+"</p><div class='circleBase type1'></div><div class='ratingc'>";n+="<div>";for(var r=1;r<=5;r++){n+=r<=t.data[key].rating_dana?"<img src='img/cost.png'>":""}n+="</div>";n+="<div>";for(var r=1;r<=5;r++){n+=r<=t.data[key].ratings?"<img src='img/rate.png'>":""}n+="</div>";n+="<div>";for(var r=1;r<=5;r++){n+=r<=t.data[key].rating_jarak?"<img src='img/distance.png'>":""}n+="</div>";n+="</div><div id='mapbtn'><img src='img/map_btn.png'></div></div></a></li>";$("#content_browse").append(n);if(t.data[key].coverfoto){$("#viewlist-"+t.data[key].idTrip).css("background-image",'url("http://labtekindie.net/trippp/'+t.data[key].coverfoto+'")')}}}else{alert("Nothing trips nearby right now")}},"json")}function sortListTrip(e){var t=JSON.parse(localStorage.getItem("browselist"));switch(e){case 1:t.sort(function(e,t){if(e.ratings>t.ratings)return-1;if(e.ratings<t.ratings)return 1;return 0});break;case 2:t.sort(function(e,t){if(e.rating_jarak>t.rating_jarak)return-1;if(e.rating_jarak<t.rating_jarak)return 1;return 0});break;case 3:t.sort(function(e,t){if(e.rating_dana>t.rating_dana)return-1;if(e.rating_dana<t.rating_dana)return 1;return 0});break;case 4:t.sort(function(e,t){if(e.rating_duration>t.rating_duration)return-1;if(e.rating_duration<t.rating_duration)return 1;return 0});break;default:t.sort(function(e,t){if(e.idTrip>t.idTrip)return-1;if(e.idTrip<t.idTrip)return 1;return 0});break}var n="";for(key in t){n+="<li><a onclick='pindahView("+t[key].idTrip+")' href='#'><div class='browse1'><p>"+t[key].judul+"</p><div class='circleBase type1'></div><div class='ratingc'>";n+="<div>";for(var r=1;r<=5;r++){n+=r<=t[key].rating_dana?"<img src='img/cost.png'>":""}n+="</div>";n+="<div>";for(var r=1;r<=5;r++){n+=r<=t[key].ratings?"<img src='img/rate.png'>":""}n+="</div>";n+="<div>";for(var r=1;r<=5;r++){n+=r<=t[key].rating_jarak?"<img src='img/distance.png'>":""}n+="</div>";n+="</div><div id='mapbtn'><img src='img/map_btn.png'></div></div></a></li>"}$("#content_browse").html(n);classie.toggle(menuSort,"cbp-spmenu-open")}function getMyListTrip(e,t){$.get("http://labtekindie.net/trippp/trip/done/"+e,{filter:t,qword:""},function(e){var t=JSON.parse(e);if(t.response){localStorage.setItem("browselist",JSON.stringify(t.data));var n="";for(key in t.data){n+="<li><a onclick='pindahView("+t.data[key].idTrip+")' href='#'><div class='browse1'><p>"+t.data[key].judul+"</p><div class='circleBase type1'></div><div class='ratingc'>";n+="<div>";for(var r=1;r<=5;r++){n+=r<=t.data[key].rating_dana?"<img src='img/cost.png'>":""}n+="</div>";n+="<div>";for(var r=1;r<=5;r++){n+=r<=t.data[key].ratings?"<img src='img/rate.png'>":""}n+="</div>";n+="<div>";for(var r=1;r<=5;r++){n+=r<=t.data[key].rating_jarak?"<img src='img/distance.png'>":""}n+="</div>";var i=t.data[key].isDone?"marker_done":"marker_wishlist";n+="</div><div id='mapbtn'><img src='img/map_btn.png'></div></div><div class='marker_done'><img class='marker_done' src='img/"+i+".png'></div></a></li>"}$("#content_browse").html(n)}else{alert("Nothing trips nearby right now")}},"json")}function getSavedPlace(e,t,n){$.get("http://labtekindie.net/trippp/place/saved/",{uid:e,filter:t,qword:n},function(e){var t=JSON.parse(e);if(t.response){localStorage.setItem("savedplacelist",JSON.stringify(t.data));var n="";for(key in t.data){var r=JSON.stringify(t.data[key]);n+="<li><a onclick='addPlaceToTrip("+r+")' href='#'><div class='place1'><p>"+t.data[key].nama+"</p>";n+="<div id='mapbtn'><img src='img/map_btn.png' /></div></div></a></li>"}$("#content_browse").html(n)}else{alert("Nothing place saved")}},"json")}function addPlaceToTrip(e){var t=JSON.parse(localStorage.getItem("createRoute"));var n=t.places.length;var r=new Object;r["key"]=n;r["judul"]=e.nama;r["ket"]=e.keterangan?e.keterangan:"add keterangan";r["pic"]=e.fotourl?e.fotourl:"img/img/default-background.png";r["lat"]=e.lat;r["lon"]=e.lon;r["kota"]=e.kota;r["durasi"]=0;r["jamSt"]="00";r["menitSt"]="00";r["jamEnd"]="00";r["menitEnd"]="00";r["tiket"]=0;r["makan"]=0;t.places.push(r);console.log(t);localStorage.setItem("createRoute",JSON.stringify(t));window.location="create.html"}function addPlace(e){var t=JSON.parse(localStorage.getItem("4sqlist"));var n=t[e].nama;var r=t[e].kota;var i=t[e].lat;var s=t[e].lon;var o=JSON.parse(localStorage.getItem("logged"));console.log(o.id);$.post("http://labtekindie.net/trippp/place/add",{nama:n,kota:r,lat:i,lon:s,userid:o.id},function(e){var t=JSON.parse(e);if(t.response){console.log(t.response);alert('Place "'+n+'"" has been saved');classie.toggle(pushmenu,"cbp-spmenu-open")}else{alert("Failed to save place")}},"json");localStorage.removeItem("4sqlist")}function addPlaces(e,t){if(t==undefined)t="createRoute";$("#content_places").append(contentPlace(e,t));$("#content_places").trigger("create")}function contentPlace(e,t){if(t==undefined)t="createRoute";var n='<li>    <div class="view2" id="picPlace-'+e+'">      <div class="judul_tempat"><a style="color:white;" href="#popupjudulTempat-'+e+'" data-rel="popup" data-transition="pop"><span id="judulTempat-'+e+'">nama tempat ...</span></a></div><div class="text-tempat cat_img"><a style="color:#fff !important;" href="#popupket_tempat-'+e+'" data-rel="popup" data-transition="pop"><span id="ket_tempat-'+e+'">keterangan ...</span></a></div>      <div class="map_img">        <div class="map_img"><a href=""><img class="img_btn" src="img/map_btn.png" /></a></div>        <div class="gal_img"><a href="" onclick="document.getElementById(\'take-picture-'+e+'\').click()"><img class="img_btn" src="img/gallery_btn.png" /></a></div>      </div><div class="ui-input-hide"><input type="file" id="take-picture-'+e+'" accept="image/*" onchange="loadImagePlace(\''+e+"','"+t+'\')"></div></div><div class="rwd2" style="margin-top:10px;"><a style="color:#000 !important;" href="#popupJam_tempat-'+e+'" data-rel="popup" data-transition="pop">        <div class="ui-block-a"><img src="img/time.png"></div>        <div class="ui-block-b"><div class="stat_text"><span class="dina_text" id="dina_jam'+e+'">24</span>h</div></div>        <div class="ui-block-c"><div class="stat_text"><span class="dina_text" id="dina_men'+e+'">0</span>m</div></div>        <div class="ui-block-d"></div>        <div class="ui-block-e"><div class="stat_text"><span class="dina_text" id="jamStart2_tempat-'+e+'">00</span>.<span class="dina_text" id="menitStart2_tempat-'+e+'">00</span>-<span class="dina_text" id="jamEnd2_tempat-'+e+'">00</span>.<span class="dina_text" id="menitEnd2_tempat-'+e+'">00</span></div></div>        <div style="clear:both"></div>        </a>      </div><!-- grid jam -->    <div class="rwd3">      <a style="color:#000 !important;" href="#popupTiket_tempat-'+e+'" data-rel="popup" data-transition="pop">        <div class="ui-block-a"><img src="img/ticket.png"></div>        <div class="ui-block-b"><div class="stat_text">Rp.<span class="dina_text" id="hargaTiket2_tempat-'+e+'">0</span></div>        </div>        <div class="ui-block-c"></div>        <div class="ui-block-d"><img src="img/food_bev.png"></div>        <div class="ui-block-e"><div class="stat_text">Rp.<span class="dina_text" id="hargaFood2_tempat-'+e+'">0</span></div></div>        <div style="clear:both"></div>      </a>    </div><!-- grid harga -->    <!--div class="rwd4">    <a style="color:#000 !important;" href="#popupVeh" data-rel="popup" data-transition="pop">      <div class="ui-block-a"><span id="imgveh"><img src="img/vehcl_bus.png"></span></div></a>    <a style="color:#000 !important;" href="#popupVeh_judul" data-rel="popup" data-transition="pop">      <div class="ui-block-b dina_text"><span id="judul-textveh">Angkot</span><span>A</span> - <span>B</span></div></a>      <div style="clear:both"></div>    </div>    <div class="text-veh"><a style="color:#000 !important;" href="#popupket_Veh" data-rel="popup" data-transition="pop"><span id="ket_vehicle">keterangan ...</a></span></div-->    <!--INI ADALAH POP UP-->    <div data-role="popup" id="popupjudulTempat-'+e+'">      <input type="text" name="text-2" id="text-judultempat-'+e+"\" onchange=\"gantiJudulTempat('text-judultempat-','judulTempat-','add title...','judul',"+e+",'"+t+'\')" value="" placeholder="judul" data-enhanced="true">    </div>     <div data-role="popup" id="popupJam_tempat-'+e+'">      <div class="waktu_mulai text_cen margin_top_bot"><img src="img/time.png"><span class="mulai_text">start time</span></div>      <div class="waktu_mulai_form">        <input class="lebar50" type="text" name="jamStart" id="jamStart_tempat-'+e+'" value="" placeholder="18"  data-enhanced="true">        <input class="lebar50" type="text" name="menitStart" id="menitStart_tempat-'+e+'" value="" placeholder="59"  data-enhanced="true">      </div>      <div class="waktu_akhir text_cen margin_top_bot"><img src="img/time.png"><span class="end_text">end time</span></div>      <div class="waktu_end_form">        <input class="lebar50" type="text" name="jamEnd" id="jamEnd_tempat-'+e+'" value="" placeholder="18"  data-enhanced="true">        <input class="lebar50" type="text" name="menitEnd" id="menitEnd_tempat-'+e+'" value="" placeholder="59"  data-enhanced="true">      </div>      <div class="tombolPopup"><a href="#" class="ui-btn ui-corner-all ui-btn-inline ui-btn-a lebar50" data-rel="back">Cancel</a><a href="#" onclick="gantiJamTempat('+e+",'"+t+'\');" value="" class="ui-btn ui-corner-all ui-btn-inline ui-btn-a lebar50" data-rel="back">Done</a>      </div>    </div>     <div data-role="popup" id="popupTiket_tempat-'+e+'">      <div class="imgtiket text_cen margin_top_bot"><img src="img/ticket.png">ticket</div>      <div><form>Rp.<input class="lebar50" type="text" name="hargaTiket" id="hargaTiket_tempat-'+e+'" value="" placeholder="18"  data-enhanced="true"></form></div>      <div class="imgfood text_cen margin_top_bot"><img src="img/food_bev.png">food & bev</div>      <div><form>Rp.<input class="lebar50" type="text" name="hargaFood" id="hargaFood_tempat-'+e+'" value="" placeholder="18"  data-enhanced="true"></form></div>      <!--<div><img src="img/rent.png"> rent</div>      <div><form>Rp.<input class="lebar50" type="text" name="hargaRent" id="hargaRent" value="" placeholder="18"  data-enhanced="true"></form></div>-->      <div class="tombolPopup"><a href="#" class="ui-btn ui-corner-all ui-btn-inline ui-btn-a lebar50" data-rel="back">Cancel</a>      <a href="#" onclick="gantiBiayaTempat('+e+",'"+t+'\');" class="ui-btn ui-corner-all ui-btn-inline ui-btn-a lebar50" data-rel="back">Done</a></div>    </div>     <div data-role="popup" id="popupket_tempat-'+e+'">      <textarea value="" name="textarea-6" placeholder="Lorem ipsum dolor sit amet," data-enhanced="true" id="ket_tempat2-'+e+'"></textarea>      <div class="tombolPopup"><a href="#" class="ui-btn ui-corner-all ui-btn-inline ui-btn-a lebar50" data-rel="back">Cancel</a><a href="#" onclick="gantiJudulTempat(\'ket_tempat2-\',\'ket_tempat-\',\'add keterangan\',\'ket\','+e+",'"+t+'\')" class="ui-btn ui-corner-all ui-btn-inline ui-btn-a lebar50" data-rel="back">Done</a>      </div>    </div>    <!--div data-role="popup" id="popupVeh">      <div class="text_popveh">pick a vehicle</div>      <a href="" onclick="gantiveh()" class="ui-btn" data-rel="back"  ><img src="img/vehcl_bus.png"></a>      <a href="" onclick="gantiveh2()" class="ui-btn" data-rel="back"><img src="img/vehcl_private.png"></a>      <a href="" onclick="gantiveh3()" class="ui-btn" data-rel="back"><img src="img/vehcl_taxi.png"></a>      <a href="" onclick="gantiveh4()" class="ui-btn" data-rel="back"><img src="img/vehcl_walk.png"></a>      <a href="" onclick="gantiveh5()" class="ui-btn" data-rel="back"><img src="img/vehcl_bike.png"></a>      <div style="clear:both"></div>    </div>    <div data-role="popup" id="popupVeh_judul">      <input type="text" name="text-2" id="text-judulveh" onchange="gantiJudul("text-judulveh","judul-textveh",\''+t+'\')" value="" placeholder="judul"  data-enhanced="true">    </div>    <div data-role="popup" id="popupket_Veh">      <textarea value="" name="textarea-6" placeholder="Lorem ipsum dolor sit amet," data-enhanced="true" id="ket_vehicle2"></textarea>      <div class="tombolPopup"><a href="#" class="ui-btn ui-corner-all ui-btn-inline ui-btn-a lebar50" data-rel="back">Cancel</a><a href="#" onclick="gantiJudul("ket_vehicle2","ket_vehicle")" class="ui-btn ui-corner-all ui-btn-inline ui-btn-a lebar50" data-rel="back">Done</a>      </div>    </div-->  </li>';return n}function addRoute(e){var t=JSON.parse(localStorage.getItem("4sqlist"));var n=t[e].nama;var r=t[e].kota;var i=t[e].lat;var s=t[e].lon;var o=JSON.parse(localStorage.getItem("logged"));console.log(o.id);var u=JSON.parse(localStorage.getItem("startRec"));var a={lat:i,lon:s,time:getCurTime(),nama:n,kota:r,ket:""};u.push(a);localStorage.setItem("startRec",JSON.stringify(u));console.log(u);localStorage.removeItem("4sqlist");alert('Place "'+n+'"" has been added to route');classie.toggle(pushmenu,"cbp-spmenu-open")}function savingTrip(e){var t=JSON.parse(localStorage.getItem("startRec"));var n={judul:"",ket:"",cover:""};var r=[{ket:"",tiket:"",makan:"",durasi:""}];var i=[{jenis:"",kend:"",waktu:"",tiket:""}];var s=JSON.parse(localStorage.getItem("logged"));var o={places:t,trip:n,trippl:r,journey:i};$.post("http://labtekindie.net/trippp/trip/rec/"+s.id,{tripadd:JSON.stringify(o)},function(t){var n=JSON.parse(t);console.log(n.response);localStorage.removeItem("startRec");alert("Trip has been saved");classie.toggle(e,"cbp-spmenu-open")},"json")}function listPlaceTo(e,t,n,r){var i=[];$.getJSON("https://api.foursquare.com/v2/venues/search?ll="+e+","+t+"&radius=100&limit=10&intent=browse&client_id=FJWPOZ2AQB3OZABDYZJMI1WQHBQBJWLAQHO5M1CKBSN4RBTO&client_secret=NCKBSSHHRXDOBIQBEEJ1NF5LJAPGJZPABCIO1LDHWMV0ANTK&v=20140707",function(n){var s=null;var o="";for(var u in n.response.venues){s={id:n.response.venues[u].id,nama:n.response.venues[u].name,lat:n.response.venues[u].location.lat,lon:n.response.venues[u].location.lng,kota:n.response.venues[u].location.city};i[u]=s}u++;s={id:"",nama:"New Place",lat:e,lon:t,kota:""};i.unshift(s);localStorage.setItem("4sqlist",JSON.stringify(i));for(u in i){o+="<li><a onclick='addPlace("+u+")' class='ui-btn ui-btn-icon-left ui-custom-icon ui-arrow-c ui-nodisc-icon'>"+i[u].nama+"</a></li>"}$("#"+r).html(o)})}function listRouteTo(e,t,n,r){var i=[];$.getJSON("https://api.foursquare.com/v2/venues/search?ll="+e+","+t+"&radius=100&limit=10&intent=browse&client_id=FJWPOZ2AQB3OZABDYZJMI1WQHBQBJWLAQHO5M1CKBSN4RBTO&client_secret=NCKBSSHHRXDOBIQBEEJ1NF5LJAPGJZPABCIO1LDHWMV0ANTK&v=20140707",function(n){var s=null;var o="";for(var u in n.response.venues){s={id:n.response.venues[u].id,nama:n.response.venues[u].name,lat:n.response.venues[u].location.lat,lon:n.response.venues[u].location.lng,kota:n.response.venues[u].location.city};i[u]=s}u++;s={id:"",nama:"New Place",lat:e,lon:t,kota:""};i.unshift(s);localStorage.setItem("4sqlist",JSON.stringify(i));for(u in i){o+="<li><a onclick='addRoute("+u+")' class='ui-btn ui-btn-icon-left ui-custom-icon ui-arrow-c ui-nodisc-icon'>"+i[u].nama+"</a></li>"}$("#"+r).html(o)})}function getHM(e,t){this.mins=e%60;this.hours=Math.floor(e/60);this.clock=t.split(":");this.clmins=(parseInt(this.clock[1])+this.mins)%60;this.clhours=(parseInt(this.clock[0])+this.hours)%24}function pad_2(e){return(e<10?"0":"")+e}function int_to_rp(e){e=parseInt(e);var t=e.toString();var n=0;var r="";for(var i=t.length-1;i>=0;i--){if(n==3){r=t[i]+"."+r;n=1}else{r=t[i]+r;n++}}return r}function getTrip(e){$.get("http://labtekindie.net/trippp/trip/view/"+e,function(e){var t=JSON.parse(e);if(t.response){var n="";n+="<div class='view1' id='picRoute'><div class='judul_view'>"+t.data.judul+"</div><div class='circleBase type1'></div><div class='ratingc'>";n+="<div>";for(var r=1;r<=5;r++){n+=r<=t.data.rating_dana?"<img src='img/cost.png'>":""}n+="</div>";n+="<div>";for(var r=1;r<=5;r++){n+=r<=t.data.ratings?"<img src='img/rate.png'>":""}n+="</div>";n+="<div>";for(var r=1;r<=5;r++){n+=r<=t.data.rating_jarak?"<img src='img/distance.png'>":""}n+="</div>";n+="</div><div class='cat_img'><img src='img/cat_family_white.png'></div><div class='map_img'><img src='img/map_btn.png'></div></div>";window.title=t.data.judul;n+="<div id='text_desc'><p>"+t.data.keterangan+"</p></div>";n+="<div class='separator'></div>";var i=new getHM(t.data.durasi,t.data.waktumulai);n+="<div class='rwd2'><div class='ui-block-a'><img src='img/time.png'></div><div class='ui-block-b'><div class='stat_text'><span class='dina_text'>"+i.hours+"</span>h</div></div><div class='ui-block-c'><div class='stat_text'><span class='dina_text'>"+i.mins+"</span>m</div></div><div class='ui-block-d'></div><div class='ui-block-e'><div class='stat_text'><span class='dina_text'>"+i.clock[0]+":"+i.clock[1]+"</span>-<span class='dina_text'>"+pad_2(i.clhours)+":"+pad_2(i.clmins)+"</span></div></div><div style='clear:both'></div></div>";n+="<div class='rwd3'><div class='ui-block-a'><img src='img/ticket.png'></div><div class='ui-block-b'><div class='stat_text'>Rp.<span class='dina_text'>"+int_to_rp(t.data.danatiket)+"</span></div></div><div class='ui-block-c'></div><div class='ui-block-d'><img src='img/food_bev.png'></div><div class='ui-block-e'><div class='stat_text'>Rp.<span class='dina_text'>"+int_to_rp(t.data.danamakan)+"</span></div></div><div style='clear:both'></div></div>";n+="<div class='separator'></div>";n+="<div><ul data-role='listview' data-icon='false' id='content_browse' class='ui-listview'>";var s=t.data.places;var o=t.data.journeys;for(var r=0;r<s.length;r++){n+="<li class='ui-li-static ui-body-inherit'>";n+="<div class='view2' id=\"picPlace-"+s[r].idPlace+"\"><div class='judul_tempat'>"+s[r].nama+"</div><div class='text-tempat cat_img'>"+s[r].keterangan+"</div><div class='map_img'><div><img src='img/gallery_btn.png'></div><div><img src='img/map_btn.png'></div></div></div>";i=new getHM(s[r].durasi,s[r].waktumulai);n+="<div class='rwd2' style='margin-top:10px'><div class='ui-block-a'><img src='img/time.png'></div><div class='ui-block-b'><div class='stat_text'><span class='dina_text'>"+i.hours+"</span>h</div></div><div class='ui-block-c'><div class='stat_text'><span class='dina_text'>"+i.mins+"</span>m</div></div><div class='ui-block-d'></div><div class='ui-block-e'><div class='stat_text'><span class='dina_text'>"+i.clock[0]+":"+i.clock[1]+"</span>-<span class='dina_text'>"+pad_2(i.clhours)+":"+pad_2(i.clmins)+"</span></div></div><div style='clear:both'></div></div>";n+="<div class='rwd3'><div class='ui-block-a'><img src='img/ticket.png'></div><div class='ui-block-b'><div class='stat_text'>Rp.<span class='dina_text'>"+int_to_rp(s[r].danatiket)+"</span></div></div><div class='ui-block-c'></div><div class='ui-block-d'><img src='img/food_bev.png'></div><div class='ui-block-e'><div class='stat_text'>Rp.<span class='dina_text'>"+int_to_rp(s[r].danamakan)+"</span></div></div><div style='clear:both'></div></div>";if(r<s.length-1){n+="<div class='rwd4'><div class='ui-block-a'><img src='img/vehcl_bus.png'></div><div class='ui-block-b dina_text'>Public Transport</div><div style='clear:both'></div></div><div class='text-veh'>"+o[r].keterangan+"</div>"}n+="</li>"}n+="</ul></div>";$("#view-content").html(n);$("#picRoute").css("background-image","url(http://labtekindie.net/trippp/"+t.data.coverfoto+")");for(var r=0;r<s.length;r++){$("#picPlace-"+s[r].idPlace).css("background-image","url(http://labtekindie.net/trippp/"+s[r].foto[0]+")")}}else{alert("Nothing trips right now")}},"json")}function simpanTempatJSON(e,t,n,r){var i=JSON.parse(localStorage.getItem(r));i["places"][n][t]=e;localStorage.setItem(r,JSON.stringify(i))}function simpanJSON(e,t,n){var r=JSON.parse(localStorage.getItem(n));r[t]=e;localStorage.setItem(n,JSON.stringify(r))}function gantiJudul(e,t,n,r,i){if(i==undefined)i="createRoute";var s=$("#"+e).val();if(s=="")s=n;$("#"+t).html(s);simpanJSON(s,r,i)}function gantiJudulTempat(e,t,n,r,i,s){if(s==undefined)s="createRoute";var o=$("#"+e+i).val();if(o=="")o=n;$("#"+t+i).html(o);simpanTempatJSON(o,r,i,s)}function cebokbring(e,t,n){if(n==undefined)n="createRoute";var r=getCheckMulti(e);console.log(r);var i="";for(var s=0;s<r.length;s++){switch(r[s]){case"cash":i="bring_cash";break;case"camera":i="bring_camera";break;case"food":i="bring_food";break;case"nohigh":i="bring_high_heels";break;case"picnic":i="bring_picnic_mat";break;case"wat":i="bring_water";break}if(s==0){$("#"+t).html('<div class="imgbring"><img src="img/'+i+'.png"/>&nbsp;&nbsp;</div>')}else{$("#"+t).append('<div class="imgbring"><img src="img/'+i+'.png"/>&nbsp;&nbsp;</div>')}}simpanJSON(r,"brings",n)}function genBrings(e,t){if(t==undefined)t="bringsRoute";var n="";for(var r=0;r<e.length;r++){switch(e[r]){case"cash":n="bring_cash";break;case"camera":n="bring_camera";break;case"food":n="bring_food";break;case"nohigh":n="bring_high_heels";break;case"picnic":n="bring_picnic_mat";break;case"wat":n="bring_water";break}if(r==0){$("#"+t).html('<div class="imgbring"><img src="img/'+n+'.png"/>&nbsp;&nbsp;</div>')}else{$("#"+t).append('<div class="imgbring"><img src="img/'+n+'.png"/>&nbsp;&nbsp;</div>')}}}function cebok(e,t,n){if(n==undefined)n="createRoute";if(t==undefined)t="tagsRoute";var r=getCheckMulti(e);console.log(r);var i="";for(var s=0;s<r.length;s++){switch(r[s]){case"edu":i="cat_educational_white";break;case"culi":i="cat_culinary_white";break;case"cult":i="cat_culture_white";break;case"eco":i="cat_economical_white";break;case"fam":i="cat_family_white";break;;case"his":i="cat_history_white";break;case"nat":i="cat_nature_white";break;case"rom":i="cat_romantic_white";break}if(s==0){$("#"+t).html('<div><img class="icontag" src="img/'+i+'.png" /></div>')}else{$("#"+t).append('<div><img class="icontag" src="img/'+i+'.png" /></div>')}}simpanJSON(r,"tags",n)}function genTags(e,t){if(t==undefined)t="tagsRoute";var n="";for(var r=0;r<e.length;r++){switch(e[r]){case"edu":n="cat_educational_white";break;case"culi":n="cat_culinary_white";break;case"cult":n="cat_culture_white";break;case"eco":n="cat_economical_white";break;case"fam":n="cat_family_white";break;;case"his":n="cat_history_white";break;case"nat":n="cat_nature_white";break;case"rom":n="cat_romantic_white";break}if(r==0){$("#"+t).html('<div><img class="icontag" src="img/'+n+'.png" /></div>')}else{$("#"+t).append('<div><img class="icontag" src="img/'+n+'.png" /></div>')}}}function gantiveh(e){var t="";switch(e){case 1:t="vehcl_bus";break;case 2:t="vehcl_private";break;case 3:t="vehcl_taxi";break;case 4:t="vehcl_walk";break;case 5:t="vehcl_bike";break}$("#imgveh").html('<div><img src="img/'+t+'.png" /></div>')}function gantiDurasi(e,t,n,r,i){if(i==undefined)i="";var s=parseInt(r);var o=parseInt(t);var u=parseInt(n);var a=parseInt(e);var f=0;var l=0;if(s<o){l=s+60-o;f--}else{l=s-o}f+=Math.floor(l/60);l=l%60;var c=u<a?u+24-a+f:u-a+f;$("#dina_jam"+i).html(c);$("#dina_men"+i).html(l)}function gantiJam(e){if(e==undefined)e="createRoute";gantiJudul("jamStart","jamStart2","00","jamSt",e);gantiJudul("menitStart","menitStart2","00","menitSt",e);gantiJudul("jamEnd","jamEnd2","00","jamEnd",e);gantiJudul("menitEnd","menitEnd2","00","menitEnd",e);gantiDurasi($("#jamStart").val(),$("#menitStart").val(),$("#jamEnd").val(),$("#menitEnd").val())}function gantiJamTempat(e,t){if(t==undefined)t="createRoute";gantiJudulTempat("jamStart_tempat-","jamStart2_tempat-","00","jamSt",e,t);gantiJudulTempat("menitStart_tempat-","menitStart2_tempat-","00","menitSt",e,t);gantiJudulTempat("jamEnd_tempat-","jamEnd2_tempat-","00","jamEnd",e,t);gantiJudulTempat("menitEnd_tempat-","menitEnd2_tempat-","00","menitEnd",e,t);gantiDurasi($("#jamStart_tempat-"+e).val(),$("#menitStart_tempat-"+e).val(),$("#jamEnd_tempat-"+e).val(),$("#menitEnd_tempat-"+e).val(),e)}function gantiBiaya(e){if(e==undefined)e="createRoute";var t=parseInt($("#hargaTiket").val());var n=parseInt($("#hargaFood").val());$("#hargaTiket2").html(int_to_rp(t));$("#hargaFood2").html(int_to_rp(n));simpanJSON(t,"tiket",e);simpanJSON(n,"makan",e)}function gantiBiayaTempat(e,t){if(t==undefined)t="createRoute";var n=parseInt($("#hargaTiket_tempat-"+e).val());var r=parseInt($("#hargaFood_tempat-"+e).val());$("#hargaTiket2_tempat-"+e).html(int_to_rp(n));$("#hargaFood2_tempat-"+e).html(int_to_rp(r));simpanTempatJSON(n,"tiket",e,t);simpanTempatJSON(r,"makan",e,t);var i=JSON.parse(localStorage.getItem(t));for(key in i.places){console.log(i.places[key])}}function loadImagePlace(e,t){if(t==undefined)t="createRoute";var n=document.getElementById("take-picture-"+e).files;if(n.length>0){var r=n[0];if(r.type.match("image.*")){var i=new FileReader;i.onload=function(n){$("#picPlace-"+e).css("background-image","url("+n.target.result+")");var r=String(n.target.result);var i=JSON.parse(localStorage.getItem(t));i["places"][e]["pic"]=r;console.log(i["places"][e]);localStorage.setItem(t,JSON.stringify(i))};i.readAsDataURL(r)}}}function loadImageFileAsURL(e){if(e==undefined)e="createRoute";var t=document.getElementById("take-picture").files;if(t.length>0){var n=t[0];if(n.type.match("image.*")){var r=new FileReader;r.onload=function(t){$("#picRoute").css("background-image","url("+t.target.result+")");var n=String(t.target.result);var r=JSON.parse(localStorage.getItem(e));r["pic"]=n;console.log(r);localStorage.setItem(e,JSON.stringify(r))};r.readAsDataURL(n)}}}